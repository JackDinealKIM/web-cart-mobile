<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>장바구니</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body class="bg-[#fff] min-h-screen w-full flex flex-col">
    <!-- header 복사 -->
    <default-header title="장바구니"></default-header>
    <main class="flex-1 w-full mx-auto pb-24 p-4">
        <div class="mx-auto">
            <div class="flex items-center justify-between mt-4 mb-2">
                <button class="flex items-center bg-green-50 text-green-900 font-semibold px-4 py-2 rounded">
                    천안 불당지웰시티점 <span class="ml-2">▼</span>
                </button>
            </div>
            <div class="flex items-center gap-2 mb-2">
                <input type="checkbox" id="cart-all" class="form-checkbox w-6 h-6 text-green-900 rounded">
                <label for="cart-all" class="text-lg font-bold">전체 선택</label>
                <button class="ml-auto border border-gray-300 rounded px-3 py-1 text-sm" id="cart-delete-selected">선택
                    삭제</button>
            </div>
            <hr class="mb-2" />
            <!-- 장바구니 아이템 리스트 -->
            <div id="cart-list" class="flex flex-col gap-6">
                <!-- 아이템 1 -->
                <div class="cart-item-row">
                    <div class="flex items-start gap-4 w-full bg-white p-4 rounded-xl">
                        <input type="checkbox" class="form-checkbox w-6 h-6 text-green-900 rounded cart-item-check mt-1">
                        <img src="https://picsum.photos/300/400?random=11" class="aspect-square rounded object-cover border" width="100" height="100" />
                        <div class="flex-1 min-w-0 flex flex-col gap-2">
                            <div class="flex items-start justify-between">
                                <div>
                                    <div class="font-bold text-lg">이고장 명품 전복죽</div>
                                    <div class="text-gray-800 text-base font-medium">이고장 명품 전복죽</div>
                                    <div class="text-gray-500 text-sm">4,900원 / 1개</div>
                                    <div class="text-gray-400 text-xs truncate">텍스트텍스트텍스트텍스트텍스트텍스트</div>
                                    <span class="inline-flex items-center bg-gray-800 text-white text-xs px-2 py-1 rounded mt-1"><img src="./images/location.png" width="12" class="mr-1"/>현장 수령</span>
                                </div>
                                <div class="flex flex-col items-end gap-2 ml-2">
                                    <span class="font-bold text-xl">4,900원</span>
                                    <button class="text-2xl text-gray-400 hover:text-gray-700 cart-item-remove">&times;</button>
                                </div>
                            </div>
                            <div class="flex items-center gap-2 mt-2 justify-end">
                                <button class="w-8 h-8 border border-gray-300 rounded text-xl font-bold text-gray-700 cart-qty-minus">-</button>
                                <span class="w-8 text-center" id="cart-qty-1">1</span>
                                <button class="w-8 h-8 border border-gray-300 rounded text-xl font-bold text-gray-700 cart-qty-plus">+</button>
                            </div>
                        </div>
                    </div>
                </div>
                <hr class="mb-2">
                <!-- 아이템 2 -->
                <div class="cart-item-row">
                    <div class="flex items-start gap-4 w-full bg-white p-4 rounded-xl">
                        <input type="checkbox" class="form-checkbox w-6 h-6 text-green-900 rounded cart-item-check mt-1">
                        <img src="https://picsum.photos/300/400?random=12" class="aspect-square rounded object-cover border" width="100" height="100" />
                        <div class="flex-1 min-w-0 flex flex-col gap-2">
                            <div class="flex items-start justify-between">
                                <div>
                                    <div class="font-bold text-lg">달달맛밤</div>
                                    <div class="text-gray-800 text-base font-medium">달달맛밤</div>
                                    <div class="text-gray-500 text-sm">3,000원 / 2개</div>
                                    <div class="text-gray-400 text-xs truncate">텍스트텍스트텍스트텍스트텍스트텍스트</div>
                                    <span class="inline-flex items-center bg-gray-800 text-white text-xs px-2 py-1 rounded mt-1"><img src="./images/location.png" width="12" class="mr-1"/>현장 수령</span>
                                </div>
                                <div class="flex flex-col items-end gap-2 ml-2">
                                    <span class="font-bold text-xl">3,000원</span>
                                    <button class="text-2xl text-gray-400 hover:text-gray-700 cart-item-remove">&times;</button>
                                </div>
                            </div>
                            <div class="flex items-center gap-2 mt-2 justify-end">
                                <button class="w-8 h-8 border border-gray-300 rounded text-xl font-bold text-gray-700 cart-qty-minus">-</button>
                                <span class="w-8 text-center" id="cart-qty-2">2</span>
                                <button class="w-8 h-8 border border-gray-300 rounded text-xl font-bold text-gray-700 cart-qty-plus">+</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- 하단 네비게이션 복사 -->
    <nav
        class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 flex justify-center items-center px-0 py-3 z-10">
        <button class="flex-1 flex flex-col items-center text-gray-700 focus:outline-none">
            <img src="./images/home.png" width="28px" height="28px" />
        </button>
        <button class="flex-1 flex flex-col items-center text-gray-700 focus:outline-none">
            <img src="./images/cart.png" width="28px" height="28px" />
        </button>
        <button class="flex-1 flex flex-col items-center text-gray-700 focus:outline-none">
            <img src="./images/chat.png" width="28px" height="28px" />
        </button>
        <button class="flex-1 flex flex-col items-center text-gray-700 focus:outline-none">
            <img src="./images/my.png" width="28px" height="28px" />
        </button>
    </nav>
    <script src="common/default_header.js"></script>
    <script>
        $(function () {
            // 전체 선택
            $('#cart-all').on('change', function () {
                $('.cart-item-check').prop('checked', $(this).is(':checked'));
            });
            // 개별 체크박스 변경 시 전체선택 체크 상태 동기화
            $('.cart-item-check').on('change', function () {
                $('#cart-all').prop('checked', $('.cart-item-check:checked').length === $('.cart-item-check').length);
            });
            // 수량 증가/감소
            $('.cart-qty-plus').on('click', function () {
                var $qty = $(this).siblings('span');
                var val = parseInt($qty.text());
                $qty.text(val + 1);
            });
            $('.cart-qty-minus').on('click', function () {
                var $qty = $(this).siblings('span');
                var val = parseInt($qty.text());
                if (val > 1) $qty.text(val - 1);
            });
            // 아이템 삭제
            $('.cart-item-remove').on('click', function () {
                $(this).closest('.cart-item-row').remove();
            });
            // 선택 삭제
            $('#cart-delete-selected').on('click', function () {
                $('.cart-item-check:checked').closest('.cart-item-row').remove();
                // 남은 아이템이 없으면 전체선택 체크 해제
                if ($('.cart-item-check').length === 0) {
                    $('#cart-all').prop('checked', false);
                }
            });
        });
    </script>
</body>

</html>