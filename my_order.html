<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <title>나의 주문내역</title>
  <script src="js/tailwind-3.4.17.js"></script>
  <script src="js/jquery-3.7.1.min.js"></script>
</head>

<body class="bg-white min-h-screen w-full flex flex-col">
  <default-header title="나의 주문내역" class="fixed top-0 left-0 w-full z-40"></default-header>
  <div class="h-14"></div>
  <div class="w-full max-w-xl mx-auto flex flex-col flex-1">
    <!-- 상단 탭 -->
    <div class="flex w-full border-b border-gray-200 mt-1">
      <button class="order-tab flex-1 py-2 text-xs font-bold text-gray-400 border-b-2 border-transparent">주문 2</button>
      <button class="order-tab flex-1 py-2 text-xs font-bold text-black border-b-2 border-black">취소 3</button>
      <button class="order-tab flex-1 py-2 text-xs font-bold text-gray-400 border-b-2 border-transparent">완료 0</button>
    </div>
    <!-- 매장 선택 -->
    <div class="px-4 pt-4">
      <div class="flex items-center justify-between mt-4 mb-2">
        <div class="relative">
          <button id="store-dropdown-btn" type="button"
            class="flex items-center bg-[#EAFFFD] text-green-900 font-semibold px-4 py-2 rounded w-60 justify-between">
            <span id="store-dropdown-label">천안 불당지웰시티점</span>
            <span class="ml-2">▼</span>
          </button>
          <ul id="store-dropdown-list"
            class="absolute left-0 mt-1 w-60 bg-white border border-green-900 rounded shadow-lg z-20 hidden">
            <li class="px-4 py-2 hover:bg-[#EAFFFD] cursor-pointer" data-store="천안 불당지웰시티점">천안 불당지웰시티점</li>
            <li class="px-4 py-2 hover:bg-[#EAFFFD] cursor-pointer" data-store="서울 강남점">서울 강남점</li>
            <li class="px-4 py-2 hover:bg-[#EAFFFD] cursor-pointer" data-store="대전 둔산점">대전 둔산점</li>
          </ul>
        </div>
      </div>
    </div>
    <!-- 주문 카드 시작 -->
    <div class="bg-white mb-4 order-card">
      <!-- 주문 날짜/건수 -->
      <div class="px-4 pt-6 pb-2 flex items-center cursor-pointer order-toggle-btn">
        <span class="text-xl font-bold mr-2">2025. 06. 12</span>
        <span class="text-base text-gray-700">주문 1건</span>
        <span class="ml-auto text-2xl text-gray-700 cursor-pointer order-toggle-arrow">&#9650;</span>
      </div>
      <!-- 주문 요약 -->
      <div>
        <div class="bg-gray-50 rounded-xl px-5 py-4 mb-4">
          <div class="text-base font-bold mb-1">상품 금액 : <span class="font-normal">10,000원</span></div>
          <div class="text-base font-bold mb-1">할인 금액 : <span class="font-normal">1,000원</span></div>
          <div class="text-base font-bold mb-1">총 결제 금액 : <span class="font-normal">9,000원</span></div>
          <div class="text-base font-bold">결제수단 : <span class="font-normal">카드</span></div>
        </div>
      </div>
      <!-- 주문 상품 리스트 -->
      <div class="order-list-section flex flex-col gap-6 px-4 pb-8">
        <div class="cart-item-row">
          <div class="flex items-start gap-4 w-full bg-white pt-4 rounded-xl">
            <img src="https://picsum.photos/300/400?random=11"
              class="aspect-square rounded object-cover border btn-order cursor-pointer" width="90"
              height="90" />
            <div>
              <div>
                <div class="font-bold text-xs">이고장 명품 전복죽</div>
                <div class="font-bold text-xs">10,900원 / 1개</div>
              </div>
              <span class="inline-flex items-center bg-gray-800 text-white text-[9px] px-2 py-1 rounded-xl mt-[30px]"><img
                  src="./images/location.png" width="10" class="mr-1" />현장 수령</span>
            </div>
            <div class="flex-1 min-w-0 flex flex-col gap-2">
              <div class="flex items-start justify-between">

                <div class="flex flex-col items-end gap-2 ml-2 w-[200px]">
                  <button class="flex-1 border border-gray-300 rounded px-2 py-1 text-[10px] font-bold whitespace-nowrap">주문 취소</button>
                </div>

              </div>

              <div class="flex items-end mt-1">
                <div class="flex-1"></div>
                <!-- 수령/미수령 토글 버튼 -->
                <div class="flex items-center rounded-full border-[#4DE5D5] bg-[#4DE5D5] p-[3px] w-[110px] h-[28px] justify-between">
                    <button type="button" class="toggle-receive flex-1 rounded-full py-1 text-[10px] font-bold bg-white text-gray-800 shadow text-center transition-all">수령</button>
                    <button type="button" class="toggle-receive flex-1 rounded-full py-1 text-[10px] font-bold text-white bg-transparent text-center transition-all">미수령</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 더미 주문 카드 1 -->
    <div class="bg-white mb-4 order-card">
      <div class="px-4 pt-6 pb-2 flex items-center cursor-pointer order-toggle-btn">
        <span class="text-xl font-bold mr-2">2025. 07. 01</span>
        <span class="text-base text-gray-700">주문 1건</span>
        <span class="ml-auto text-2xl text-gray-700 cursor-pointer order-toggle-arrow">&#9650;</span>
      </div>
      <div>
        <div class="bg-gray-50 rounded-xl px-5 py-4 mb-4">
          <div class="text-base font-bold mb-1">상품 금액 : <span class="font-normal">8,500원</span></div>
          <div class="text-base font-bold mb-1">할인 금액 : <span class="font-normal">500원</span></div>
          <div class="text-base font-bold mb-1">총 결제 금액 : <span class="font-normal">8,000원</span></div>
          <div class="text-base font-bold">결제수단 : <span class="font-normal">카드</span></div>
        </div>
      </div>
      <div class="order-list-section flex flex-col gap-6 px-4 pb-8">
        <div class="cart-item-row">
          <div class="flex items-start gap-4 w-full bg-white pt-4 rounded-xl">
            <img src="https://picsum.photos/100/100?random=31" class="aspect-square rounded object-cover border btn-order cursor-pointer" width="90" height="90" />
            <div>
              <div>
                <div class="font-bold text-xs">달콤고구마</div>
                <div class="font-bold text-xs">8,500원 / 1개</div>
              </div>
              <span class="inline-flex items-center bg-gray-800 text-white text-[9px] px-2 py-1 rounded-xl mt-[30px]"><img src="./images/location.png" width="10" class="mr-1" />현장 수령</span>
            </div>
            <div class="flex-1 min-w-0 flex flex-col gap-2">
              <div class="flex items-start justify-between">
                <div class="flex flex-col items-end gap-2 ml-2 w-[200px]">
                  <button class="flex-1 border border-gray-300 rounded px-2 py-1 text-[10px] font-bold whitespace-nowrap">주문 취소</button>
                </div>
              </div>
              <div class="flex items-end mt-1">
                <div class="flex-1"></div>
                <div class="flex items-center rounded-full border-[#4DE5D5] bg-[#4DE5D5] p-[3px] w-[110px] h-[28px] justify-between">
                  <button type="button" class="toggle-receive flex-1 rounded-full py-1 text-[10px] font-bold bg-white text-gray-800 shadow text-center transition-all">수령</button>
                  <button type="button" class="toggle-receive flex-1 rounded-full py-1 text-[10px] font-bold text-white bg-transparent text-center transition-all">미수령</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 더미 주문 카드 2 -->
    <div class="bg-white mb-4 order-card">
      <div class="px-4 pt-6 pb-2 flex items-center cursor-pointer order-toggle-btn">
        <span class="text-xl font-bold mr-2">2025. 06. 25</span>
        <span class="text-base text-gray-700">주문 2건</span>
        <span class="ml-auto text-2xl text-gray-700 cursor-pointer order-toggle-arrow">&#9650;</span>
      </div>
      <div>
        <div class="bg-gray-50 rounded-xl px-5 py-4 mb-4">
          <div class="text-base font-bold mb-1">상품 금액 : <span class="font-normal">15,000원</span></div>
          <div class="text-base font-bold mb-1">할인 금액 : <span class="font-normal">2,000원</span></div>
          <div class="text-base font-bold mb-1">총 결제 금액 : <span class="font-normal">13,000원</span></div>
          <div class="text-base font-bold">결제수단 : <span class="font-normal">현장결제</span></div>
        </div>
      </div>
      <div class="order-list-section flex flex-col gap-6 px-4 pb-8">
        <div class="cart-item-row">
          <div class="flex items-start gap-4 w-full bg-white pt-4 rounded-xl">
            <img src="https://picsum.photos/100/100?random=32" class="aspect-square rounded object-cover border btn-order cursor-pointer" width="90" height="90" />
            <div>
              <div>
                <div class="font-bold text-xs">치즈볼</div>
                <div class="font-bold text-xs">7,000원 / 1개</div>
              </div>
              <span class="inline-flex items-center bg-gray-800 text-white text-[9px] px-2 py-1 rounded-xl mt-[30px]"><img src="./images/location.png" width="10" class="mr-1" />현장 수령</span>
            </div>
            <div class="flex-1 min-w-0 flex flex-col gap-2">
              <div class="flex items-start justify-between">
                <div class="flex flex-col items-end gap-2 ml-2 w-[200px]">
                  <button class="flex-1 border border-gray-300 rounded px-2 py-1 text-[10px] font-bold whitespace-nowrap">주문 취소</button>
                </div>
              </div>
              <div class="flex items-end mt-1">
                <div class="flex-1"></div>
                <div class="flex items-center rounded-full border-[#4DE5D5] bg-[#4DE5D5] p-[3px] w-[110px] h-[28px] justify-between">
                  <button type="button" class="toggle-receive flex-1 rounded-full py-1 text-[10px] font-bold bg-white text-gray-800 shadow text-center transition-all">수령</button>
                  <button type="button" class="toggle-receive flex-1 rounded-full py-1 text-[10px] font-bold text-white bg-transparent text-center transition-all">미수령</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="cart-item-row">
          <div class="flex items-start gap-4 w-full bg-white pt-4 rounded-xl">
            <img src="https://picsum.photos/100/100?random=33" class="aspect-square rounded object-cover border btn-order cursor-pointer" width="90" height="90" />
            <div>
              <div>
                <div class="font-bold text-xs">아메리카노</div>
                <div class="font-bold text-xs">8,000원 / 1개</div>
              </div>
              <span class="inline-flex items-center bg-gray-800 text-white text-[9px] px-2 py-1 rounded-xl mt-[30px]"><img src="./images/location.png" width="10" class="mr-1" />현장 수령</span>
            </div>
            <div class="flex-1 min-w-0 flex flex-col gap-2">
              <div class="flex items-start justify-between">
                <div class="flex flex-col items-end gap-2 ml-2 w-[200px]">
                  <button class="flex-1 border border-gray-300 rounded px-2 py-1 text-[10px] font-bold whitespace-nowrap">주문 취소</button>
                </div>
              </div>
              <div class="flex items-end mt-1">
                <div class="flex-1"></div>
                <div class="flex items-center rounded-full border-[#4DE5D5] bg-[#4DE5D5] p-[3px] w-[110px] h-[28px] justify-between">
                  <button type="button" class="toggle-receive flex-1 rounded-full py-1 text-[10px] font-bold bg-white text-gray-800 shadow text-center transition-all">수령</button>
                  <button type="button" class="toggle-receive flex-1 rounded-full py-1 text-[10px] font-bold text-white bg-transparent text-center transition-all">미수령</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- 더미 주문 카드 3 -->
    <div class="bg-white mb-4 order-card">
      <div class="px-4 pt-6 pb-2 flex items-center cursor-pointer order-toggle-btn">
        <span class="text-xl font-bold mr-2">2025. 06. 10</span>
        <span class="text-base text-gray-700">주문 1건</span>
        <span class="ml-auto text-2xl text-gray-700 cursor-pointer order-toggle-arrow">&#9650;</span>
      </div>
      <div>
        <div class="bg-gray-50 rounded-xl px-5 py-4 mb-4">
          <div class="text-base font-bold mb-1">상품 금액 : <span class="font-normal">5,000원</span></div>
          <div class="text-base font-bold mb-1">할인 금액 : <span class="font-normal">0원</span></div>
          <div class="text-base font-bold mb-1">총 결제 금액 : <span class="font-normal">5,000원</span></div>
          <div class="text-base font-bold">결제수단 : <span class="font-normal">카드</span></div>
        </div>
      </div>
      <div class="order-list-section flex flex-col gap-6 px-4 pb-8">
        <div class="cart-item-row">
          <div class="flex items-start gap-4 w-full bg-white pt-4 rounded-xl">
            <img src="https://picsum.photos/100/100?random=34" class="aspect-square rounded object-cover border btn-order cursor-pointer" width="90" height="90" />
            <div>
              <div>
                <div class="font-bold text-xs">단호박죽</div>
                <div class="font-bold text-xs">5,000원 / 1개</div>
              </div>
              <span class="inline-flex items-center bg-gray-800 text-white text-[9px] px-2 py-1 rounded-xl mt-[30px]"><img src="./images/location.png" width="10" class="mr-1" />현장 수령</span>
            </div>
            <div class="flex-1 min-w-0 flex flex-col gap-2">
              <div class="flex items-start justify-between">
                <div class="flex flex-col items-end gap-2 ml-2 w-[200px]">
                  <button class="flex-1 border border-gray-300 rounded px-2 py-1 text-[10px] font-bold whitespace-nowrap">주문 취소</button>
                </div>
              </div>
              <div class="flex items-end mt-1">
                <div class="flex-1"></div>
                <div class="flex items-center rounded-full border-[#4DE5D5] bg-[#4DE5D5] p-[3px] w-[110px] h-[28px] justify-between">
                  <button type="button" class="toggle-receive flex-1 rounded-full py-1 text-[10px] font-bold bg-white text-gray-800 shadow text-center transition-all">수령</button>
                  <button type="button" class="toggle-receive flex-1 rounded-full py-1 text-[10px] font-bold text-white bg-transparent text-center transition-all">미수령</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="h-14"></div>
  <default-bottom></default-bottom>
  <script src="common/default_header.js"></script>
  <script src="common/default_bottom.js"></script>
  <script>
    $(function () {
      // 탭 UI (실제 동작은 예시)
      $('.order-tab').on('click', function () {
        $('.order-tab').removeClass('text-black border-black').addClass('text-gray-400 border-transparent');
        $(this).addClass('text-black border-black').removeClass('text-gray-400 border-transparent');
      });
      // 수령/미수령 토글
      $(document).on('click', '.toggle-receive', function() {
        var $parent = $(this).parent();
        $parent.find('.toggle-receive').removeClass('bg-white text-gray-800 shadow').addClass('bg-transparent text-white');
        $(this).addClass('bg-white text-gray-800 shadow').removeClass('bg-transparent text-white');
        // 클릭 시 알림
        if ($(this).text().trim() === '수령') {
          alert('수령 처리되었습니다.');
        } else if ($(this).text().trim() === '미수령') {
          alert('미수령 처리되었습니다.');
        }
      });
      // 최초 진입시 '수령' 선택, 미수령은 흰색
      $('.toggle-receive').first().addClass('bg-white text-gray-800 shadow').removeClass('bg-transparent text-white');
      $('.toggle-receive').last().addClass('bg-transparent text-white').removeClass('bg-white text-gray-800 shadow');
      // 주문취소 버튼 클릭 시(예시)
      $('button:contains("주문 취소")').on('click', function () {
        alert('주문이 취소되었습니다.');
      });
      // 주문 카드별 토글 (order-card 전체에 이벤트)
      $('.order-card').each(function (idx) {
        var $card = $(this);
        var $btn = $card.find('.order-toggle-btn');
        var $list = $card.find('.order-list-section');
        var $arrow = $btn.find('.order-toggle-arrow');
        var opened = (idx === 0); // 첫 번째만 true
        if (opened) {
          $list.show();
          $arrow.html('&#9650;');
        } else {
          $list.hide();
          $arrow.html('&#9660;');
        }
        $card.on('click', function (e) {
          // 토글 버튼 내부 클릭만 허용 (주문취소, 토글버튼 등은 제외)
          if ($(e.target).closest('.order-toggle-btn').length === 0) return;
          opened = !opened;
          if (opened) {
            $list.show();
            $arrow.html('&#9650;');
          } else {
            $list.hide();
            $arrow.html('&#9660;');
          }
        });
      });
      // 매장 드롭다운 동작(cart.html과 동일)
      $('#store-dropdown-btn').on('click', function (e) {
        e.stopPropagation();
        $('#store-dropdown-list').toggle();
      });
      $('#store-dropdown-list li').on('click', function () {
        var store = $(this).data('store');
        $('#store-dropdown-label').text(store);
        $('#store-dropdown-list').hide();
      });
      $(document).on('click', function (e) {
        if (!$(e.target).closest('#store-dropdown-btn, #store-dropdown-list').length) {
          $('#store-dropdown-list').hide();
        }
      });
    });
  </script>
</body>

</html>